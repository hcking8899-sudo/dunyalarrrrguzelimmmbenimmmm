<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BÄ°ZÄ°M EVRENÄ°MÄ°Z ðŸ«¶</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
    <style>
        :root { --pink: #ff4d6d; --dark: #590d22; --glass: rgba(255, 255, 255, 0.5); }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        body { margin: 0; font-family: 'Montserrat', sans-serif; background: linear-gradient(135deg, #fff1f2 0%, #ffd1d1 100%); min-height: 100vh; overflow-x: hidden; color: var(--dark); text-align: center; }

        /* --- TEST BÃ–LÃœMÃœ --- */
        #quiz-container { padding: 40px 20px; min-height: 100vh; display: flex; flex-direction: column; justify-content: center; }
        .quiz-card { background: white; padding: 25px; border-radius: 30px; border: 2px solid var(--pink); box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .option-btn { display: block; width: 100%; padding: 14px; margin: 10px 0; border: 2px solid #f0f0f0; border-radius: 15px; background: white; font-weight: 700; cursor: pointer; transition: 0.3s; color: var(--dark); }
        .option-btn.correct { background: #d1fae5; border-color: #10b981; }
        .option-btn.wrong { background: #fee2e2; border-color: #ef4444; }

        /* --- ANALÄ°Z (KAMERA) --- */
        #scanner-page { position: fixed; inset: 0; background: #000; z-index: 9999; display: none; flex-direction: column; align-items: center; justify-content: center; }
        video { width: 85%; max-width: 320px; border-radius: 30px; border: 3px solid var(--pink); transform: scaleX(-1); }
        #scan-msg { color: white; margin-top: 30px; font-weight: 900; font-size: 1.2rem; min-height: 60px; padding: 0 20px; }

        /* --- ANA Ä°Ã‡ERÄ°K --- */
        #main-content { display: none; opacity: 0; transition: 1.5s; }
        .counter-box { background: var(--glass); backdrop-filter: blur(10px); padding: 20px; margin: 20px; border-radius: 25px; border: 1px solid rgba(255,255,255,0.4); }
        .timer-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; }
        .time-val { font-size: 1.5rem; font-weight: 900; color: var(--pink); }

        /* KazÄ± Kazan */
        .scratch-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; padding: 20px; max-width: 400px; margin: 0 auto; }
        .scratch-box { position: relative; aspect-ratio: 1/1; border-radius: 15px; overflow: hidden; background: #ddd; }
        .scratch-box img { width: 100%; height: 100%; object-fit: cover; }
        canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; touch-action: none; }

        /* Ä°ltifat ve GÃ¶kyÃ¼zÃ¼ */
        #sky { position: relative; width: 100%; height: 400px; margin-top: 40px; overflow: hidden; border-top: 2px dashed var(--pink); }
        .balloon { position: absolute; bottom: -100px; font-size: 30px; cursor: pointer; animation: floatUp var(--spd) linear forwards; }
        @keyframes floatUp { 0% { bottom: -100px; transform: translateX(0); } 100% { bottom: 500px; transform: translateX(30px); } }
        
        #pop-msg { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 25px; border-radius: 25px; border: 3px solid var(--pink); z-index: 10000; display: none; width: 85%; font-weight: 800; }
        .boom { position: absolute; font-size: 40px; animation: explode 0.5s forwards; }
        @keyframes explode { 0% { transform: scale(1); opacity: 1; } 100% { transform: scale(3); opacity: 0; } }
    </style>
</head>
<body onclick="spawnEmoji(event)">

    <div id="quiz-container">
        <h1 style="font-family:'Dancing Script'; color: var(--pink);">Ruh EÅŸi Testi âœ¨</h1>
        <div id="quiz-card" class="quiz-card">
            <h3 id="q-text">YÃ¼kleniyor...</h3>
            <div id="opt-container"></div>
        </div>
    </div>

    <div id="scanner-page">
        <video id="video" autoplay playsinline muted></video>
        <div id="scan-msg">Test BaÅŸarÄ±lÄ±. <br>GÃ¼zellik Analizi BaÅŸlatÄ±lÄ±yor...</div>
    </div>

    <div id="main-content">
        <h1 style="font-family:'Dancing Script'; padding-top: 20px;">DÃ¼nyalarrr GÃ¼zelimeðŸ«¶</h1>
        
        <div class="counter-box">
            <p style="font-weight: 900; margin-bottom: 10px;">Seni tanÄ±dÄ±ÄŸÄ±mdan beri;</p>
            <div class="timer-grid">
                <div><span class="time-val" id="d">-</span><br><small>GÃœN</small></div>
                <div><span class="time-val" id="h">-</span><br><small>SAAT</small></div>
                <div><span class="time-val" id="m">-</span><br><small>DAK.</small></div>
                <div><span class="time-val" id="s">-</span><br><small>SAN.</small></div>
            </div>
        </div>

        <h3 style="font-weight: 900;">KAZI KAZAN âœ¨</h3>
        <div class="scratch-grid" id="scratch-grid"></div>

        <div style="margin: 30px 20px; padding: 25px; background: white; border-radius: 25px; border: 2px solid var(--pink);">
            <div id="comp-text" style="font-weight: 800; min-height: 50px; margin-bottom: 15px;">GerÃ§ekleri GÃ¶rmek Ä°Ã§in TÄ±kla... âœ¨</div>
            <button id="comp-btn" onclick="showCompliment()" style="background:var(--pink); color:white; border:none; padding:12px 25px; border-radius:20px; font-weight:900;">Ä°LTÄ°FAT PATLAT!</button>
        </div>

        <h3 style="font-weight: 900;">DÄ°LEK GÃ–KYÃœZÃœ âœ¨</h3>
        <p id="rights">Patlatma HakkÄ±n: 8</p>
        <div id="sky"></div>
    </div>

    <div id="pop-msg"></div>

    <script>
        // TEST SORULARI
        const questions = [
            { q: "Sence dÃ¼nya Ã¼zerindeki oksijen miktarÄ±nÄ± asÄ±l belirleyen nedir?", a: ["Ormanlar", "Planktonlar", "Senin nefes alÄ±ÅŸÄ±n; dÃ¼nya sen nefes aldÄ±kÃ§a dÃ¶nÃ¼yor", "Atmosferik basÄ±nÃ§"], c: 2 },
            { q: "Senin gÃ¼zelliÄŸini matematiksel bir iÅŸleme dÃ¶ksek sonuÃ§ ne olurdu?", a: ["Sonsuz", "TanÄ±msÄ±z", "Hata (Sistem bu kadar gÃ¼zelliÄŸi kaldÄ±ramaz)", "Sadece 'Sen'"], c: 2 },
            { q: "Sence senin en Ã§ok hangi Ã¶zelliÄŸin beni benden alÄ±yor?", a: ["BakÄ±ÅŸlarÄ±n", "Sesin", "Kalbinin saflÄ±ÄŸÄ±", "Sadece 'sen' olman bile yetiyor"], c: 3 },
            { q: "KaranlÄ±k bir labirentte olsak, yolumuzu neye gÃ¶re bulurduk?", a: ["YÄ±ldÄ±zlara gÃ¶re", "Hislerimin gÃ¼cÃ¼ne gÃ¶re", "Sesinin yankÄ±landÄ±ÄŸÄ± yÃ¶ne gÃ¶re; tek Ã§Ä±kÄ±ÅŸ sensin", "El ele tutuÅŸarak"], c: 2 },
            { q: "Seni tek bir kelimeyle dÃ¼nyaya anlatmam gerekse?", a: ["Zarafet", "IÅŸÄ±k", "Yuva", "DÃ¼nyaalarrr GÃ¼zelim"], c: 3 },
            { q: "Telefonumdaki en Ã¶zel dosya hangisi?", a: ["FotoÄŸraflarÄ±n", "MesajlarÄ±n", "Haberin yokken Ã§ektiÄŸim en doÄŸal halin", "Hepsi"], c: 2 }
        ];

        let curQ = 0;
        function loadQ() {
            const q = questions[curQ];
            document.getElementById('q-text').innerText = q.q;
            const cont = document.getElementById('opt-container');
            cont.innerHTML = "";
            q.a.forEach((opt, i) => {
                const b = document.createElement('button');
                b.className = 'option-btn';
                b.innerText = opt;
                b.onclick = () => {
                    if(i === q.c) {
                        b.classList.add('correct');
                        setTimeout(() => {
                            curQ++;
                            if(curQ < questions.length) loadQ();
                            else startScanner();
                        }, 600);
                    } else {
                        b.classList.add('wrong');
                        setTimeout(() => { alert("Yaaa! Bir daha dÃ¼ÅŸÃ¼n gÃ¼zelim..."); loadQ(); }, 400);
                    }
                }
                cont.appendChild(b);
            });
        }

        // TARAYICI VE GEÃ‡Ä°Åž
        function startScanner() {
            document.getElementById('quiz-container').style.display = 'none';
            const scanPage = document.getElementById('scanner-page');
            scanPage.style.display = 'flex';
            const vid = document.getElementById('video');
            navigator.mediaDevices.getUserMedia({ video: { facingMode: "user" } }).then(s => vid.srcObject = s);
            
            setTimeout(() => {
                document.getElementById('scan-msg').innerHTML = "DÃœNYANIN EN GÃœZELÄ° TESPÄ°T EDÄ°LDÄ°! ðŸ˜";
                document.getElementById('scan-msg').style.color = "#ff4d6d";
                setTimeout(() => {
                    scanPage.style.opacity = '0';
                    setTimeout(() => {
                        scanPage.style.display = 'none';
                        showMain();
                    }, 1000);
                }, 3000);
            }, 3000);
        }

        function showMain() {
            const main = document.getElementById('main-content');
            main.style.display = 'block';
            setTimeout(() => { main.style.opacity = '1'; initScratch(); startBalloons(); }, 50);
        }

        // SAYAÃ‡
        setInterval(() => {
            const diff = new Date() - new Date('2024-09-16T00:00:00');
            document.getElementById('d').innerText = Math.floor(diff/864e5);
            document.getElementById('h').innerText = Math.floor((diff/36e5)%24);
            document.getElementById('m').innerText = Math.floor((diff/6e4)%60);
            document.getElementById('s').innerText = Math.floor((diff/1e3)%60);
        }, 1000);

        // KAZI KAZAN (KARIÅžIK)
        function initScratch() {
            const imgs = ['o1.jpg', 'o2.jpg', 'o3.jpg', 'ben1.jpg', 'ben2.jpg', 'ben3.jpg'].sort(() => Math.random() - 0.5);
            const grid = document.getElementById('scratch-grid');
            imgs.forEach(src => {
                const box = document.createElement('div'); box.className = 'scratch-box';
                const img = document.createElement('img'); img.src = src;
                const cvs = document.createElement('canvas');
                box.append(img, cvs); grid.append(box);
                const ctx = cvs.getContext('2d');
                setTimeout(() => {
                    cvs.width = box.clientWidth; cvs.height = box.clientHeight;
                    ctx.fillStyle = '#c0c0c0'; ctx.fillRect(0,0,cvs.width,cvs.height);
                }, 500);
                const draw = (e) => {
                    const r = cvs.getBoundingClientRect();
                    const x = (e.clientX || e.touches[0].clientX) - r.left;
                    const y = (e.clientY || e.touches[0].clientY) - r.top;
                    ctx.globalCompositeOperation = 'destination-out';
                    ctx.beginPath(); ctx.arc(x,y,25,0,6.28); ctx.fill();
                };
                cvs.addEventListener('touchmove', (e) => { e.preventDefault(); draw(e); }, {passive:false});
                cvs.addEventListener('mousemove', (e) => e.buttons === 1 && draw(e));
            });
        }

        // Ä°LTÄ°FAT SÄ°STEMÄ°
        let comps = ["seni Ã§ooookk seviyorummm", "PonÃ§iÄŸimmmm", "TatluÅŸummm", "DÃ¼nyaalarrrr gÃ¼zelimmm", "HayatÄ±mÄ±nn anlamÄ±Ä±Ä±", "Mucizemmm", "CanÄ±mÄ±n iÃ§iiiii"];
        let pool = [];
        function showCompliment() {
            const btn = document.getElementById('comp-btn');
            if(pool.length === 0) pool = [...comps].sort(() => Math.random() - 0.5);
            btn.disabled = true;
            btn.innerText = "YazÄ±lÄ±yor...";
            typeWriter(pool.pop(), 'comp-text', 1000, () => {
                btn.disabled = false;
                btn.innerText = "Ä°LTÄ°FAT PATLAT!";
            });
        }

        function typeWriter(txt, elId, wait, cb) {
            let i = 0; const el = document.getElementById(elId); el.innerHTML = "";
            function type() {
                if(i < txt.length) { el.innerHTML += txt.charAt(i++); setTimeout(type, 50); }
                else setTimeout(cb, wait);
            }
            type();
        }

        // GÃ–KYÃœZÃœ
        const notes = ["GÃ¼lÃ¼ÅŸÃ¼n iÃ§in patladÄ±! âœ¨", "GÃ¼zelliÄŸin dÃ¼nyadan deÄŸil ðŸ˜", "Hep mutlu ol ðŸ« ", "Ä°yi ki varsÄ±n â¤ï¸", "Mucizem ðŸ’–", "En gÃ¼zel manzaram ðŸ¥°", "Hep beraber olalÄ±mmm ðŸ«¶", "Seni sevmek en gÃ¼zeli â¤ï¸â€ðŸ”¥"];
        let pops = 0;
        function startBalloons() {
            setInterval(() => { if(pops < 8) createBalloon(); }, 1800);
        }
        function createBalloon() {
            const b = document.createElement('div'); b.className = 'balloon';
            b.innerText = "ðŸŽˆ"; b.style.left = (Math.random() * 80 + 10) + "%";
            b.style.setProperty('--spd', (7 + Math.random() * 3) + "s");
            b.onclick = (e) => {
                if(pops >= 8) return;
                const boom = document.createElement('div'); boom.className = 'boom';
                boom.innerText = 'ðŸ’¥'; boom.style.left = e.clientX + 'px'; boom.style.top = e.clientY + 'px';
                document.body.appendChild(boom); setTimeout(() => boom.remove(), 500);
                
                const p = document.getElementById('pop-msg'); p.style.display = 'block';
                typeWriter(notes[pops], 'pop-msg', 4000, () => p.style.display = 'none');
                pops++; b.remove();
                document.getElementById('rights').innerText = `HakkÄ±n: ${8-pops}`;
            }
            document.getElementById('sky').append(b);
            setTimeout(() => b.remove(), 10000);
        }

        function spawnEmoji(e) {
            const s = document.createElement('span'); s.innerText = 'â¤ï¸';
            s.style.position = 'fixed'; s.style.left = (e.clientX || e.touches[0].clientX) + 'px';
            s.style.top = (e.clientY || e.touches[0].clientY) + 'px';
            s.animate([{opacity:1, transform:'scale(1)'}, {opacity:0, transform:'translateY(-50px)'}], 1000);
            document.body.appendChild(s); setTimeout(() => s.remove(), 1000);
        }

        loadQ();
    </script>
</body>
</html>
